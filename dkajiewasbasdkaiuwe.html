<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>For You</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #140814;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Starfield Background */
        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .star {
            position: absolute;
            font-size: 12px;
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.2;
            }

            50% {
                opacity: 0.8;
            }
        }

        /* Gradient Orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.3;
            animation: float-orb 20s ease-in-out infinite;
            z-index: 2;
        }

        .orb1 {
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            top: -200px;
            left: -200px;
        }

        .orb2 {
            width: 500px;
            height: 500px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            bottom: -250px;
            right: -250px;
            animation-delay: 3s;
        }

        .orb3 {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            top: 50%;
            left: 50%;
            animation-delay: 6s;
        }

        @keyframes float-orb {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            33% {
                transform: translate(100px, -100px) scale(1.1);
            }

            66% {
                transform: translate(-50px, 100px) scale(0.9);
            }
        }

        /* Intro Screen */
        .intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 1s ease, visibility 1s ease;
        }

        .intro-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .heart-container {
            overflow: visible !important;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 500px;
            height: 500px;
        }

        .heart-symbol {
            overflow: visible !important;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
        }

        #pinkboard {
            width: 400px !important;
            height: 400px !important;
            display: block;
            animation: animate 1.3s infinite;
        }

        @keyframes animate {
            0% {
                transform: scale(1);
            }

            30% {
                transform: scale(0.8);
            }

            60% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1);
            }
        }

        #pinkboard:before,
        #pinkboard:after {
            content: '';
            position: absolute;
            background: #FF5CA4;
            width: 100px;
            height: 160px;
            border-top-left-radius: 50px;
            border-top-right-radius: 50px;
        }

        #pinkboard:before {
            left: 100px;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
            box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
        }

        #pinkboard:after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        .particle-container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            opacity: 0;
            animation: particle-burst 2s ease-out forwards;
            animation-delay: 2s;
        }

        @keyframes particle-burst {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) translate(0, 0);
            }

            100% {
                opacity: 0;
                transform: translate(-50%, -50%) translate(var(--tx), var(--ty));
            }
        }

        .envelope-scene {
            position: absolute;
            opacity: 0;
            transition: opacity 0.8s ease, transform 0.3s ease;
            cursor: pointer;
            pointer-events: none;
        }

        .envelope-scene.show {
            opacity: 1;
            pointer-events: none;
        }

        .envelope-scene.ready {
            pointer-events: auto;
        }

        .envelope-scene:hover {
            transform: scale(1.05);
        }

        @keyframes fade-in-envelope {
            to {
                opacity: 1;
            }
        }

        .glass-envelope {
            width: 180px;
            height: 120px;
            background: rgba(255, 0, 0, 0.11);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            position: relative;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 90px solid transparent;
            border-right: 90px solid transparent;
            border-top: 60px solid rgba(255, 0, 0, 0.11);
            transform-origin: top center;
            animation: open-flap 0.8s ease forwards;
            animation-delay: 4.5s;
        }

        @keyframes open-flap {
            to {
                transform: rotateX(-180deg);
            }
        }

        .envelope-letter {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 140px;
            height: 80px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            animation: lift-letter 0.6s ease forwards;
            animation-delay: 5s;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        @keyframes lift-letter {
            to {
                transform: translateY(-30px);
            }
        }

        .tap-hint {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            font-weight: 300;
            letter-spacing: 2px;
            opacity: 0;
            animation: fade-in-hint 0.5s ease forwards;
            animation-delay: 5.5s;
        }

        @keyframes fade-in-hint {
            to {
                opacity: 1;
            }
        }

        /* Main Content */
        .main-content {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 1s ease, visibility 1s ease;
            overflow-y: auto;
            padding: 20px;
        }

        .main-content.show {
            opacity: 1;
            visibility: visible;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 60px 50px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            color: white;
            text-align: center;
            transform: scale(0.9);
            animation: scale-in 0.8s ease forwards;
            margin: auto;
        }

        @keyframes scale-in {
            to {
                transform: scale(1);
            }
        }

        .title {
            font-size: 3em;
            font-weight: 300;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.2em;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 40px;
            letter-spacing: 3px;
        }

        .avatar {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3) 0%, rgba(118, 75, 162, 0.3) 100%);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .days {
            font-size: 2.5em;
            font-weight: 200;
            margin: 20px 0;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .days-label {
            font-size: 0.4em;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 2px;
        }

        .message-box {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
            line-height: 1.8;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.8);
        }

        .message-box p {
            margin-bottom: 15px;
        }

        .reveal-btn {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3) 0%, rgba(118, 75, 162, 0.3) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 16px 48px;
            font-size: 1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            font-weight: 300;
            margin: 10px;
        }

        .reveal-btn:hover {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.5) 0%, rgba(118, 75, 162, 0.5) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
        }

        .secret-message {
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(240, 147, 251, 0.2) 0%, rgba(245, 87, 108, 0.2) 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        .secret-message.show {
            opacity: 1;
            max-height: 300px;
        }

        .secret-message h3 {
            font-weight: 300;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        /* Photo Album */
        #albumModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 31, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        #albumModal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .close-album {
            position: fixed;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            cursor: pointer;
            z-index: 2001;
            transition: transform 0.3s;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .close-album:hover {
            transform: scale(1.2) rotate(90deg);
            background: rgba(255, 255, 255, 0.2);
        }

        .book-container {
            perspective: 2000px;
            width: 90%;
            max-width: 1000px;
            height: 70vh;
            position: relative;
        }

        .book {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s ease;
        }

        .page {
            position: absolute;
            width: 50%;
            height: 100%;
            background: white;
            border: 2px solid #8b7355;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            transform-origin: left center;
            transition: transform 0.8s ease;
            transform-style: preserve-3d;
            backface-visibility: hidden;
        }

        .page-left {
            left: 0;
            border-radius: 10px 0 0 10px;
        }

        .page-right {
            right: 0;
            border-radius: 0 10px 10px 0;
        }

        .page-content {
            width: 100%;
            height: 100%;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .page-content img {
            max-width: 80%;
            max-height: 60%;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .photo-placeholder {
            width: 80%;
            height: 60%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 16px;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            color: white;
            flex-direction: column;
            padding: 20px;
        }

        .page-caption {
            margin-top: 20px;
            font-size: 18px;
            color: #8b7355;
            text-align: center;
            font-style: italic;
        }

        .page-number {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #8b7355;
            font-size: 14px;
        }

        .book-nav {
            position: absolute;
            bottom: -80px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .nav-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page.flipped {
            transform: rotateY(-180deg);
        }

        .page-back {
            position: absolute;
            width: 100%;
            height: 100%;
            transform: rotateY(180deg);
            backface-visibility: hidden;
        }

        /* Floating particles */
        .float-particle {
            position: fixed;
            font-size: 14px;
            opacity: 0;
            animation: float-up 8s linear infinite;
            z-index: 3;
        }

        @keyframes float-up {
            0% {
                opacity: 0;
                transform: translateY(100vh) translateX(0);
            }

            10% {
                opacity: 0.6;
            }

            90% {
                opacity: 0.6;
            }

            100% {
                opacity: 0;
                transform: translateY(-100px) translateX(50px);
            }
        }

        /* Responsive cho iPhone 12 Pro Max và điện thoại nhỏ hơn */
        @media screen and (max-width: 430px) {
            body {
                overflow-x: hidden;
                padding: 0;
            }

            .intro-screen {
                padding: 0;
                overflow: hidden;
            }

            /* Thu nhỏ trái tim cho vừa màn hình */
            .heart-container {
                width: 100vw;
                height: 50vh;
                max-width: 100vw;
                padding: 0;
                margin: 0;
            }

            .heart-symbol {
                transform: scale(0.75);
                transform-origin: center center;
            }

            /* Canvas trái tim - giữ 400px */
            #pinkboard {
                width: 400px !important;
                height: 400px !important;
            }

            /* Phong thư cân đối với trái tim */
            .glass-envelope {
                width: 140px;
                height: 90px;
            }

            .envelope-flap {
                border-left: 70px solid transparent;
                border-right: 70px solid transparent;
                border-top: 45px solid rgba(255, 0, 0, 0.11);
            }

            .envelope-letter {
                top: 20px;
                left: 20px;
                width: 100px;
                height: 50px;
                font-size: 28px;
            }

            .tap-hint {
                font-size: 11px;
                bottom: -35px;
                letter-spacing: 1.5px;
            }

            /* Card chính */
            .glass-card {
                width: 95%;
                padding: 30px 20px;
                border-radius: 20px;
            }

            .title {
                font-size: 2em;
            }

            .subtitle {
                font-size: 1em;
                margin-bottom: 25px;
            }

            .avatar {
                width: 100px;
                height: 100px;
            }

            .days {
                font-size: 1.8em;
            }

            .message-box {
                font-size: 14px;
                padding: 20px;
                line-height: 1.6;
            }

            .reveal-btn {
                width: 100%;
                padding: 12px 0;
                font-size: 0.9em;
            }

            .secret-message {
                padding: 20px;
            }

            /* Album responsive */
            .book-container {
                width: 95%;
                height: auto;
                max-height: 80vh;
                padding-bottom: 100px;
                overflow: hidden;
            }

            .book {
                display: flex;
                flex-direction: column;
                height: auto;
                min-height: 500px;
                position: relative;
            }

            .page {
                position: relative;
                width: 100%;
                height: auto;
                min-height: 400px;
                margin-bottom: 20px;
                transform-origin: center;
                border-radius: 10px;
                transition: transform 0.6s ease, opacity 0.6s ease;
            }

            /* Hiệu ứng lật cho mobile */
            .page.slide-out-left {
                animation: slideOutLeft 0.6s ease forwards;
            }

            .page.slide-out-right {
                animation: slideOutRight 0.6s ease forwards;
            }

            .page.slide-in-left {
                animation: slideInLeft 0.6s ease forwards;
            }

            .page.slide-in-right {
                animation: slideInRight 0.6s ease forwards;
            }

            @keyframes slideOutLeft {
                0% {
                    transform: translateX(0) rotateY(0deg);
                    opacity: 1;
                }

                100% {
                    transform: translateX(-100%) rotateY(-90deg);
                    opacity: 0;
                }
            }

            @keyframes slideOutRight {
                0% {
                    transform: translateX(0) rotateY(0deg);
                    opacity: 1;
                }

                100% {
                    transform: translateX(100%) rotateY(90deg);
                    opacity: 0;
                }
            }

            @keyframes slideInLeft {
                0% {
                    transform: translateX(-100%) rotateY(-90deg);
                    opacity: 0;
                }

                100% {
                    transform: translateX(0) rotateY(0deg);
                    opacity: 1;
                }
            }

            @keyframes slideInRight {
                0% {
                    transform: translateX(100%) rotateY(90deg);
                    opacity: 0;
                }

                100% {
                    transform: translateX(0) rotateY(0deg);
                    opacity: 1;
                }
            }

            .page-left {
                border-radius: 10px;
            }

            .page-right {
                border-radius: 10px;
            }

            .page-content {
                padding: 30px 20px;
                min-height: 400px;
            }

            .page-content img {
                max-width: 100%;
                max-height: 250px;
            }

            .photo-placeholder {
                width: 100%;
                height: 250px;
                font-size: 14px;
            }

            .page-caption {
                font-size: 16px;
                margin-top: 15px;
            }

            .page-number {
                font-size: 12px;
            }

            .book-nav {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(10, 10, 31, 0.9);
                padding: 15px 20px;
                border-radius: 50px;
                backdrop-filter: blur(10px);
                z-index: 2002;
            }

            .nav-btn {
                padding: 10px 20px;
                font-size: 14px;
            }

            .close-album {
                top: 10px;
                right: 15px;
                width: 40px;
                height: 40px;
                font-size: 28px;
            }

            /* Giảm số lượng particle cho điện thoại để mượt hơn */
            .particle-container .particle {
                width: 3px;
                height: 3px;
            }

            .star {
                font-size: 10px !important;
            }

            .float-particle {
                font-size: 12px !important;
            }
        }

        @media (max-width: 768px) {
            .book-container {
                height: auto;
                max-height: 90vh;
            }

            .page {
                padding: 30px 20px;
            }

            .glass-card {
                padding: 40px 30px;
            }
        }
    </style>
</head>

<body>
    <!-- Starfield -->
    <div class="starfield" id="starfield"></div>
    <!-- Gradient Orbs -->
    <!-- Floating Particles -->
    <div id="floatingParticles"></div>
    <!-- Intro Screen -->
    <div class="intro-screen" id="introScreen">
        <div class="heart-container" onclick="showEnvelope()">
            <div class="heart-symbol"><canvas id="pinkboard"></canvas></div>
            <div class="particle-container" id="particleContainer"></div>
        </div>
        <div class="envelope-scene" id="envelopeScene" onclick="openContent()">
            <div class="glass-envelope">
                <div class="envelope-flap"></div>
                <div class="envelope-letter">💌</div>
            </div>
            <div class="tap-hint">Anh gửi bé nèee!</div>
        </div>
    </div>
    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="glass-card">
            <h1 class="title">20 • 10</h1>
            <p class="subtitle">HAPPY VIETNAMESE WOMEN'S DAY</p>
            <div class="avatar">
                <img alt="💕" onerror="this.style.display='none'; this.parentElement.innerHTML='🌹'" src="" />
            </div>
            <div class="days">
                <span id="daysCount">0</span>
                <span class="days-label">Ngày có nhau</span>
            </div>
            <div class="message-box">
                <p>Bé iuu,</p>
                <p>Chúc em 20/10 thật nhiều yêu thương, thật nhiều niềm vui và những điều tuyệt vời nhất trên thế gian
                    này.
                    Với anh, em không chỉ là cô gái xinh đẹp nhất, mà còn là người luôn khiến anh nghĩ đến mỗi ngày.</p>
                <p>Cảm ơn em vì đã đến bên anh, vì nụ cười luôn làm tan biến mọi mệt mỏi, vì sự dịu dàng khiến anh thấy
                    cuộc sống này trở nên ý nghĩa hơn.
                    Cảm ơn em đã yêu anh, hiểu anh, và cho anh biết thế nào là hạnh phúc thật sự.</p>
                <p>Anh chỉ mong hôm nay — và cả những ngày sau này — em luôn được mỉm cười, được yêu thương, và sẽ luôn
                    tỏa sáng. 🌹</p>
                <p style="text-align: center; margin-top: 20px;">Anh yêu em nhiều lắm! 💖</p>
            </div>
            <button class="reveal-btn" onclick="openAlbum()">Ảnh dìm của bé đâyyy 📸</button>
        </div>
    </div>
    <!-- Album - Cuốn sổ -->
    <div id="albumModal">
        <div class="close-album" onclick="closeAlbum()">✕</div>
        <div class="book-container">
            <div class="book" id="book">
                <!-- Trang trái -->
                <div class="page page-left" id="page0">
                    <div class="page-content">
                        <h2 style="color: #d81b60; margin-bottom: 20px;">💕 Sổ Tình Iuuu</h2>
                        <p style="color: #666; text-align: center; line-height: 1.8;">
                            Anh hong tìm được ảnh dìm của bé òi<br />
                            Em bé của anh xinh quáa<br /><br />
                            Số lượng ảnh có hạn nhưng tình yêu của anh vô hạn😘
                        </p>
                        <div class="page-number">Trang bìa</div>
                    </div>
                </div>
                <!-- Trang phải -->
                <div class="page page-right" id="page1">
                    <div class="page-content">
                        <div class="photo-placeholder">Ảnh 1<br />Thêm ảnh của bạn vào đây</div>
                        <div class="page-caption">Khoảnh khắc đầu tiên</div>
                        <div class="page-number">1</div>
                    </div>
                </div>
            </div>
            <div class="book-nav">
                <button class="nav-btn" id="prevBtn" onclick="prevPage()">←</button>
                <button class="nav-btn" id="nextBtn" onclick="nextPage()">→</button>
            </div>
        </div>
    </div>
    <script>
        // Tạo ngôi sao
        function createStarfield() {
            const starfield = document.getElementById('starfield');
            const hearts = ['♥️', '💕', '💖', '💗', '💓', '💝'];
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                star.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.fontSize = (Math.random() * 8 + 8) + 'px';
                star.style.animationDelay = Math.random() * 3 + 's';
                starfield.appendChild(star);
            }
        }

        // Tạo particle burst
        function createParticleBurst() {
            const container = document.getElementById('particleContainer');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                const angle = (Math.PI * 2 * i) / 30;
                const distance = 150 + Math.random() * 50;
                particle.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
                particle.style.setProperty('--ty', Math.sin(angle) * distance + 'px');
                particle.style.animationDelay = Math.random() * 0.3 + 's';
                container.appendChild(particle);
            }
        }

        // Tạo floating particles
        function createFloatingParticles() {
            const container = document.getElementById('floatingParticles');
            const hearts = ['♥️', '💕', '💖', '💗'];
            setInterval(() => {
                const particle = document.createElement('div');
                particle.classList.add('float-particle');
                particle.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                particle.style.left = Math.random() * 100 + '%';
                particle.style.fontSize = (Math.random() * 8 + 10) + 'px';
                particle.style.animationDuration = (Math.random() * 5 + 5) + 's';
                container.appendChild(particle);

                setTimeout(() => particle.remove(), 8000);
            }, 500);
        }

        // Mở main content
        function openContent() {
            const envelope = document.getElementById('envelopeScene');
            if (!envelope || !envelope.classList.contains('ready')) return;

            document.getElementById('introScreen').classList.add('hidden');
            document.getElementById('mainContent').classList.add('show');
        }

        // Reveal secret
        function revealSecret() {
            const secret = document.getElementById('secretMessage');
            secret.classList.toggle('show');
        }

        // Tính số ngày yêu nhau - THAY ĐỔI NGÀY BẮT ĐẦU YÊU NHAU
        const startDate = new Date('2024-11-17');
        const today = new Date();
        const days = Math.ceil((today - startDate) / (1000 * 60 * 60 * 24));
        document.getElementById('daysCount').textContent = days;

        // Album - Quản lý trang
        let currentPage = 0;
         // Tổng số trang (số chẵn)

        // Danh sách ảnh thực + caption
        const photos = [
            { src: 'picture/picture1.jpeg', caption: 'Nắm tay mãi nháa' },
            { src: 'picture/picture2.jpeg', caption: 'Mặt dỗi cute thếee, mà đừng dỗi anh nghen.' },
            { src: 'picture/picture3.jpeg', caption: 'Con Cáo ăn thịt con Thỏ đây.' },
            { src: 'picture/picture4.jpeg', caption: 'Đẹp miễn bàn, hehe.' },
            { src: 'picture/picture5.jpeg', caption: 'Đẹp quá mới ngắm kỹ zz á.' },
            { src: 'picture/picture6.jpeg', caption: 'Em xinh Thùy Phi, say hi!' },
            { src: 'picture/picture7.jpeg', caption: 'Nàng thơ của tuii.' },
            { src: 'picture/picture8.jpeg', caption: 'Chào bé ba nhá, hehe.' },
            { src: 'picture/picture9.jpeg', caption: 'Rạng rỡ như ngày tết luôn.' },
            { src: 'picture/picture10.jpeg', caption: 'Tấm ảnh anh thích nhất luôn.' },
            { src: 'picture/picture11.jpeg', caption: 'Xinh quáaa, mà lo bị cướp vợ quá.' },
            { src: 'picture/picture12.jpeg', caption: 'Cute dữ zọoo.' },
            { src: 'picture/picture13.jpeg', caption: 'Cho ôm miếng iiii.' },
            { src: 'picture/picture14.jpeg', caption: 'Răng em dính son kìa (anh giỡn ó, hehe).' },
            { src: 'picture/picture15.jpeg', caption: 'Tóc tui đan cho vợ nè.' },
            { src: 'picture/picture16.jpeg', caption: 'Đẹp gái dữ zz, mê quá chời nè.' },
            { src: 'picture/picture17.jpeg', caption: 'Đòi hun tui hỏ, oke cho nè💋.' },
            { src: 'picture/picture18.jpeg', caption: 'Úi tui bị bỏ thuốc gòi.' },
            { src: 'picture/picture19.jpeg', caption: 'Tấm này thiếu chú rể ròi nè, zz mà hong rủ anh.' },
            { src: 'picture/picture20.jpeg', caption: '👈 vợ tui đó mọi người.' },
            { src: 'picture/picture21.jpeg', caption: 'Sao hong ngắm anh mà ngắm đt zz.' },
            { src: 'picture/picture22.jpeg', caption: 'Tụi nớ chụp lén mình kìa em, mà đẹp hehe.' },
            { src: 'picture/picture23.jpeg', caption: 'HAHAHA (anh hết content gòi😅).' },
            { src: 'picture/picture24.jpeg', caption: 'Couple đẹp nhất Huế.' },
            { src: 'picture/picture25.jpeg', caption: 'Dịu dàng quáaa.' }
        ];

        const totalPages = Math.ceil(photos.length / 2) * 2; 


        function openAlbum() {
            document.getElementById('albumModal').classList.add('show');
            updateBookPages();
        }

        function closeAlbum() {
            document.getElementById('albumModal').classList.remove('show');
        }

        function updateBookPages() {
            const book = document.getElementById('book');
            book.innerHTML = '';

            // Kiểm tra nếu mobile
            const isMobile = window.innerWidth <= 430;

            if (isMobile) {
                // Mobile: Hiển thị từng trang riêng biệt (vertical scroll)
                if (currentPage === 0) {
                    book.innerHTML = `
                        <div class="page page-left">
                            <div class="page-content">
                                <h2 style="color: #d81b60; margin-bottom: 20px;">💕 Sổ Tình Iuu</h2>
                                <p style="color: #666; text-align: center; line-height: 1.8;">
                                    Anh hong tìm được ảnh dìm của bé òi<br />
                            Em bé của anh xinh quáa<br /><br />
                            Số lượng ảnh có hạn nhưng tình yêu của anh vô hạn😘
                                </p>
                                <div class="page-number">Trang bìa</div>
                            </div>
                        </div>
                    `;
                } else if (currentPage < totalPages - 1) {
                    const photoNum = currentPage;
                    book.innerHTML = `
                        <div class="page page-left">
                            <div class="page-content">
                                <img src="${photos[photoNum - 1]?.src || ''}" 
                                    alt="Ảnh ${photoNum}" 
                                    style="max-width: 100%; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);" />
                                <div class="page-caption">${photos[photoNum - 1]?.caption || ''}</div>
                            </div>
                        </div>
                    `;
                } else {
                    book.innerHTML = `
                        <div class="page page-left">
                            <div class="page-content">
                                <h2 style="color: #d81b60;">❤️</h2>
                                <p style="color: #666; text-align: center; margin-top: 20px;">
                                    Tương lai sẽ còn nhiều<br>
                                    kỷ niệm đẹp nữa<br>
                                    em nháaaa...
                                </p>
                                <div class="page-number">Hết</div>
                            </div>
                        </div>
                    `;
                }
            } else {
    // ---------------------- DESKTOP: hiển thị 2 trang cạnh nhau ----------------------
    const book = document.getElementById('book');

    // Xóa nội dung cũ
    book.innerHTML = '';

    // Tạo 2 trang (trái – phải)
    const leftPage = document.createElement('div');
    const rightPage = document.createElement('div');
    leftPage.className = 'page page-left';
    rightPage.className = 'page page-right';

    // ✅ Gán ID để hiệu ứng lật trang hoạt động
    leftPage.id = 'page' + (currentPage * 2);
    rightPage.id = 'page' + (currentPage * 2 + 1);

    // --- Trang đầu tiên (bìa + ảnh 1)
    if (currentPage === 0) {
        leftPage.innerHTML = `
            <div class="page-content">
                <h2 style="color: #d81b60; margin-bottom: 20px;">💕 Sổ Tình Iuu</h2>
                <p style="color: #666; text-align: center; line-height: 1.8;">
                    Anh hong tìm được ảnh dìm của bé òi<br />
                    Em bé của anh xinh quáa<br /><br />
                    Số lượng ảnh có hạn nhưng tình yêu của anh vô hạn😘
                </p>
                <div class="page-number">Trang bìa</div>
            </div>
        `;

        const photo = photos[0];
        rightPage.innerHTML = `
            <div class="page-content">
                <img src="${photo.src}" 
                    alt="Ảnh 1" 
                    style="max-width: 100%; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);" />
                <div class="page-caption">${photo.caption}</div>
                <div class="page-number">1</div>
            </div>
        `;
    } else {
        // --- Các trang sau: mỗi currentPage tương ứng với 1 cặp ảnh
        // VD: currentPage = 1 → ảnh 2–3, currentPage = 2 → ảnh 4–5
        const leftIndex = currentPage * 2 - 0;   // ảnh bên trái
        const rightIndex = currentPage * 2 + 1;  // ảnh bên phải

        // Trang trái
        if (leftIndex < photos.length) {
            const photoLeft = photos[leftIndex];
            leftPage.innerHTML = `
                <div class="page-content">
                    <img src="${photoLeft.src}" 
                        alt="Ảnh ${leftIndex + 1}" 
                        style="max-width: 100%; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);" />
                    <div class="page-caption">${photoLeft.caption}</div>
                    <div class="page-number">${leftIndex + 1}</div>
                </div>
            `;
        } else {
            leftPage.innerHTML = `
                <div class="page-content">
                    <h2 style="color: #d81b60;">❤️</h2>
                    <p style="color: #666; text-align: center; margin-top: 20px;">
                        Hết ảnh bên trái rồi nè 💕
                    </p>
                </div>
            `;
        }

        // Trang phải
        if (rightIndex < photos.length) {
            const photoRight = photos[rightIndex];
            rightPage.innerHTML = `
                <div class="page-content">
                    <img src="${photoRight.src}" 
                        alt="Ảnh ${rightIndex + 1}" 
                        style="max-width: 100%; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);" />
                    <div class="page-caption">${photoRight.caption}</div>
                    <div class="page-number">${rightIndex + 1}</div>
                </div>
            `;
        } else {
            rightPage.innerHTML = `
                <div class="page-content">
                    <h2 style="color: #d81b60;">❤️</h2>
                    <p style="color: #666; text-align: center; margin-top: 20px;">
                            Tương lai sẽ còn nhiều<br>
                            kỷ niệm đẹp nữa<br>
                            em nháaaa...
                    </p>
                    <div class="page-number">Hết</div>
                </div>
            `;
        }
    }

    book.appendChild(leftPage);
    book.appendChild(rightPage);
}



            updateButtons();
        }

        function nextPage() {
    const isMobile = window.innerWidth <= 430;

    if (isMobile) {
        if (currentPage < totalPages - 1) {
            const currentPageElement = document.querySelector('.page');
            if (currentPageElement) {
                currentPageElement.classList.add('slide-out-left');
                setTimeout(() => {
                    currentPage++;
                    updateBookPages();
                    setTimeout(() => {
                        const newPage = document.querySelector('.page');
                        if (newPage) newPage.classList.add('slide-in-right');
                    }, 50);
                }, 600);
            }
        }
    } else {
        // Desktop: mỗi lần lật hiển thị 2 ảnh mới
        if (currentPage * 2 + 1 < photos.length) {
            const rightPage = document.getElementById('page' + (currentPage * 2 + 1));
            if (rightPage) rightPage.classList.add('flipped');

            setTimeout(() => {
                currentPage++;
                updateBookPages();
            }, 400);
        }
    }
}


        function prevPage() {
    const isMobile = window.innerWidth <= 430;

    if (isMobile) {
        if (currentPage > 0) {
            const currentPageElement = document.querySelector('.page');
            if (currentPageElement) {
                currentPageElement.classList.add('slide-out-right');
                setTimeout(() => {
                    currentPage--;
                    updateBookPages();
                    setTimeout(() => {
                        const newPage = document.querySelector('.page');
                        if (newPage) newPage.classList.add('slide-in-left');
                    }, 50);
                }, 600);
            }
        }
    } else {
        if (currentPage > 0) {
            currentPage--;
            updateBookPages();
            setTimeout(() => {
                const rightPage = document.getElementById('page' + (currentPage * 2 + 1));
                if (rightPage) rightPage.classList.remove('flipped');
            }, 50);
        }
    }
}


        function updateButtons() {
            const isMobile = window.innerWidth <= 430;

            if (isMobile) {
                document.getElementById('prevBtn').disabled = currentPage === 0;
                document.getElementById('nextBtn').disabled = currentPage >= totalPages - 1;
            } else {
                document.getElementById('prevBtn').disabled = currentPage === 0;
                document.getElementById('nextBtn').disabled = currentPage >= totalPages - 2;
            }
        }

        let envelopeShown = false;

        // Hiển thị phong thư (chỉ hiển thị 1 lần)
        function showEnvelope() {
            if (envelopeShown) return;
            envelopeShown = true;

            const envelope = document.querySelector('.envelope-scene');
            envelope.classList.add('show');

            // reset animation của phần thư
            const flap = envelope.querySelector('.envelope-flap');
            const letter = envelope.querySelector('.envelope-letter');
            const hint = envelope.querySelector('.tap-hint');
            flap.style.animation = 'none';
            letter.style.animation = 'none';
            hint.style.animation = 'none';
            void flap.offsetWidth; // force reflow để restart animation
            flap.style.animation = 'open-flap 0.8s ease forwards 0.5s';
            letter.style.animation = 'lift-letter 0.6s ease forwards 1s';
            hint.style.animation = 'fade-in-hint 0.5s ease forwards 1.5s';
            setTimeout(() => {
                envelope.classList.add('ready');
            }, 1000);
        }

        // Nếu sau 3 giây chưa click, tự động hiện phong thư
        setTimeout(() => {
            showEnvelope();
        }, 3000);

        // Initialize
        window.addEventListener('load', () => {
            createStarfield();
            createParticleBurst();
            createFloatingParticles();
        });
    </script>
    <script>
        /*
         * Settings
         */
        var settings = {
            particles: {
                length: 2000,
                duration: 2,
                velocity: 100,
                effect: -1.3,
                size: 13,
            },
        };

        /*
         * RequestAnimationFrame polyfill by Erik Möller
         */
        (function () { var b = 0; var c = ["ms", "moz", "webkit", "o"]; for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) { window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"]; window.cancelAnimationFrame = window[c[a] + "CancelAnimationFrame"] || window[c[a] + "CancelRequestAnimationFrame"] } if (!window.requestAnimationFrame) { window.requestAnimationFrame = function (h, e) { var d = new Date().getTime(); var f = Math.max(0, 16 - (d - b)); var g = window.setTimeout(function () { h(d + f) }, f); b = d + f; return g } } if (!window.cancelAnimationFrame) { window.cancelAnimationFrame = function (d) { clearTimeout(d) } } }());

        /*
         * Point class
         */
        var Point = (function () {
            function Point(x, y) {
                this.x = (typeof x !== 'undefined') ? x : 0;
                this.y = (typeof y !== 'undefined') ? y : 0;
            }
            Point.prototype.clone = function () {
                return new Point(this.x, this.y);
            };
            Point.prototype.length = function (length) {
                if (typeof length == 'undefined')
                    return Math.sqrt(this.x * this.x + this.y * this.y);
                this.normalize();
                this.x *= length;
                this.y *= length;
                return this;
            };
            Point.prototype.normalize = function () {
                var length = this.length();
                this.x /= length;
                this.y /= length;
                return this;
            };
            return Point;
        })();

        /*
         * Particle class
         */
        var Particle = (function () {
            function Particle() {
                this.position = new Point();
                this.velocity = new Point();
                this.acceleration = new Point();
                this.age = 0;
            }
            Particle.prototype.initialize = function (x, y, dx, dy) {
                this.position.x = x;
                this.position.y = y;
                this.velocity.x = dx;
                this.velocity.y = dy;
                this.acceleration.x = dx * settings.particles.effect;
                this.acceleration.y = dy * settings.particles.effect;
                this.age = 0;
            };
            Particle.prototype.update = function (deltaTime) {
                this.position.x += this.velocity.x * deltaTime;
                this.position.y += this.velocity.y * deltaTime;
                this.velocity.x += this.acceleration.x * deltaTime;
                this.velocity.y += this.acceleration.y * deltaTime;
                this.age += deltaTime;
            };
            Particle.prototype.draw = function (context, image) {
                function ease(t) {
                    return (--t) * t * t + 1;
                }
                var size = image.width * ease(this.age / settings.particles.duration);
                context.globalAlpha = 1 - this.age / settings.particles.duration;
                context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);
            };
            return Particle;
        })();

        /*
         * ParticlePool class
         */
        var ParticlePool = (function () {
            var particles,
                firstActive = 0,
                firstFree = 0,
                duration = settings.particles.duration;

            function ParticlePool(length) {
                particles = new Array(length);
                for (var i = 0; i < particles.length; i++)
                    particles[i] = new Particle();
            }
            ParticlePool.prototype.add = function (x, y, dx, dy) {
                particles[firstFree].initialize(x, y, dx, dy);
                firstFree++;
                if (firstFree == particles.length) firstFree = 0;
                if (firstActive == firstFree) firstActive++;
                if (firstActive == particles.length) firstActive = 0;
            };
            ParticlePool.prototype.update = function (deltaTime) {
                var i;
                if (firstActive < firstFree) {
                    for (i = firstActive; i < firstFree; i++)
                        particles[i].update(deltaTime);
                }
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++)
                        particles[i].update(deltaTime);
                    for (i = 0; i < firstFree; i++)
                        particles[i].update(deltaTime);
                }
                while (particles[firstActive].age >= duration && firstActive != firstFree) {
                    firstActive++;
                    if (firstActive == particles.length) firstActive = 0;
                }
            };
            ParticlePool.prototype.draw = function (context, image) {
                if (firstActive < firstFree) {
                    for (i = firstActive; i < firstFree; i++)
                        particles[i].draw(context, image);
                }
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++)
                        particles[i].draw(context, image);
                    for (i = 0; i < firstFree; i++)
                        particles[i].draw(context, image);
                }
            };
            return ParticlePool;
        })();

        /*
         * Putting it all together
         */
        (function (canvas) {
            var context = canvas.getContext('2d'),
                particles = new ParticlePool(settings.particles.length),
                particleRate = settings.particles.length / settings.particles.duration,
                time;

            function pointOnHeart(t) {
                return new Point(
                    160 * Math.pow(Math.sin(t), 3),
                    130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25
                );
            }

            var image = (function () {
                var canvas = document.createElement('canvas'),
                    context = canvas.getContext('2d');
                canvas.width = settings.particles.size;
                canvas.height = settings.particles.size;
                function to(t) {
                    var point = pointOnHeart(t);
                    point.x = settings.particles.size / 2 + point.x * settings.particles.size / 450;
                    point.y = settings.particles.size / 2 - point.y * settings.particles.size / 450;
                    return point;
                }
                context.beginPath();
                var t = -Math.PI;
                var point = to(t);
                context.moveTo(point.x, point.y);
                while (t < Math.PI) {
                    t += 0.01;
                    point = to(t);
                    context.lineTo(point.x, point.y);
                }
                context.closePath();
                context.fillStyle = '#FF5CA4';
                context.fill();
                var image = new Image();
                image.src = canvas.toDataURL();
                return image;
            })();

            function render() {
                requestAnimationFrame(render);
                var newTime = new Date().getTime() / 1000,
                    deltaTime = newTime - (time || newTime);
                time = newTime;
                context.clearRect(0, 0, canvas.width, canvas.height);
                var amount = particleRate * deltaTime;
                for (var i = 0; i < amount; i++) {
                    var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
                    var dir = pos.clone().length(settings.particles.velocity);
                    particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);
                }
                particles.update(deltaTime);
                particles.draw(context, image);
            }

            function onResize() {
                // Luôn set canvas thành 400x400
                canvas.width = 400;
                canvas.height = 400;
            }
            window.onresize = onResize;

            setTimeout(function () {
                onResize();
                render();
            }, 10);
        })(document.getElementById('pinkboard'));
    </script>
</body>

</html>